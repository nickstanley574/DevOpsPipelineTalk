language: minimal

git:
  depth: 5
jobs:
  include:
  - stage: Build
    script: ".travis/build.sh"
    if: "(branch = develop)"
  - stage: Test
    if: branch =~ /(feature\/.*|ops\/.*|develop)/
    script: ".travis/tests.sh"
  - stage: Deploy
    if: branch =~ /(develop|stage|master|ops\/.*)/
    deploy:
      script: ".travis/deploy.sh"
      on:
        all_branches: true

